$(function () {
  'use strict';
  const url = window.location.href;  // 현재 URL 가져오기
  const [baseUrl] = url.split('?');  // '?' 이전의 부분을 추출
  let s = baseUrl;  // 검색 값 제거한 새로운 URL
  // 가끔 url/id 값이 있는 경우도 있음.(마지막값)
  // id가 있는 경우 => 숫자인 경우,
  if(!isNaN(s.split('/').slice(-1))) {
    s = s.replace(/\d+$/, "").slice(0, -1);
  };
  
  let i = s.replace(window.location.protocol + '//' + window.location.host + '/', '')

  var a = $('ul#sidebarnav a').filter(function () {
      return this.href === s || this.href === i;
    });
  a.parentsUntil('.sidebar-nav').each(function (s) {
    $(this).is('li') && 0 !== $(this).children('a').length
      ? ($(this).children('a').addClass('active'), 0 === $(this).parent('ul#sidebarnav').length ? $(this).addClass('active') : $(this).addClass('selected'))
      : $(this).is('ul') || 0 !== $(this).children('a').length
      ? $(this).is('ul') && $(this).addClass('in')
      : $(this).addClass('selected');
  }),
    a.addClass('active'),
    $('#sidebarnav a').on('click', function (s) {
      $(this).hasClass('active')
        ? $(this).hasClass('active') && ($(this).removeClass('active'), $(this).parents('ul:first').removeClass('active'), $(this).next('ul').removeClass('in'))
        : ($('ul', $(this).parents('ul:first')).removeClass('in'), $('a', $(this).parents('ul:first')).removeClass('active'), $(this).next('ul').addClass('in'), $(this).addClass('active'));
    }),
    $('#sidebarnav >li >a.has-arrow').on('click', function (s) {
      s.preventDefault();
    });
});
